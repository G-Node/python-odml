dist: xenial

language: python

osx_image: xcode12.2

matrix:
  include:
    - python: "3.6"
      os: linux
      dist: xenial
      env: pymajor=3
      
    - python: "3.7"
      os: linux
      env: pymajor=3
      dist: xenial
      
    - language: generic
      os: osx
      env: pymajor=3
      addons:
        homebrew:
          packages:
            - python3
          update: true

before_install:
  - if [ "$TRAVIS_OS_NAME" == "osx" ];
    then
      export PYCMD=python${pymajor};
      export PIPCMD=pip${pymajor};
    else
      export PYCMD=python;
      export PIPCMD=pip;
    fi;

install:  
  - $PIPCMD install lxml enum34 pyyaml rdflib owlrl requests

script:
  - which $PYCMD
  - $PYCMD --version
  - $PYCMD setup.py build
  - if [ $COVERALLS = 1 ];
    then
      coverage${PYVER} run --source=odml setup.py test && coverage${PYVER} report -m;
    else
      $PYCMD setup.py test;
    fi;

after_success:
- if [ "$TRAVIS_OS_NAME" == "linux" ];
  then
    coveralls;
  fi;
